{"ast":null,"code":"import { computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { useToast } from 'vue-toastification';\nexport default {\n  name: 'CartView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const toast = useToast();\n\n    // Computed properties\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const cartItemsCount = computed(() => store.getters['cart/cartItemsCount']);\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated']);\n    const loading = computed(() => store.getters.isLoading);\n\n    // Methods\n    const fetchCart = () => {\n      store.dispatch('cart/fetchCart');\n    };\n    const updateQuantity = (productId, quantity) => {\n      if (quantity < 1) {\n        removeFromCart(productId);\n        return;\n      }\n      store.dispatch('cart/updateCartItem', {\n        productId,\n        quantity\n      });\n    };\n    const removeFromCart = productId => {\n      store.dispatch('cart/removeFromCart', productId);\n    };\n    const proceedToCheckout = () => {\n      if (!isAuthenticated.value) {\n        toast.info('Для оформления заказа необходимо войти в систему');\n        router.push('/login?redirect=/checkout');\n      } else {\n        router.push('/checkout');\n      }\n    };\n    const formatPrice = price => {\n      return new Intl.NumberFormat('ru-RU').format(price);\n    };\n\n    // Lifecycle hooks\n    onMounted(() => {\n      fetchCart();\n    });\n    return {\n      cartItems,\n      cartTotal,\n      cartItemsCount,\n      loading,\n      updateQuantity,\n      removeFromCart,\n      proceedToCheckout,\n      formatPrice\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","useStore","useRouter","useToast","name","setup","store","router","toast","cartItems","getters","cartTotal","cartItemsCount","isAuthenticated","loading","isLoading","fetchCart","dispatch","updateQuantity","productId","quantity","removeFromCart","proceedToCheckout","value","info","push","formatPrice","price","Intl","NumberFormat","format"],"sources":["C:\\Users\\geeksaider\\VeloW\\frontend\\src\\views\\CartView.vue"],"sourcesContent":["<template>\n  <div class=\"container mx-auto px-4 py-8\">\n    <h1 class=\"text-3xl font-bold mb-8\">Корзина</h1>\n    \n    <div v-if=\"loading\" class=\"flex justify-center py-12\">\n      <div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-600\"></div>\n    </div>\n    \n    <div v-else-if=\"cartItems.length === 0\" class=\"text-center py-12 bg-white rounded-lg shadow-md\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-16 w-16 mx-auto text-slate-400 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n      </svg>\n      <h2 class=\"text-2xl font-semibold text-slate-800 mb-4\">Ваша корзина пуста</h2>\n      <p class=\"text-slate-600 mb-6\">Добавьте товары в корзину, чтобы продолжить покупки</p>\n      <router-link to=\"/shop\" class=\"btn btn-primary\">\n        Перейти в каталог\n      </router-link>\n    </div>\n    \n    <div v-else class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n      <div class=\"lg:col-span-2\">\n        <div class=\"bg-white rounded-lg shadow-md overflow-hidden\">\n          <!-- Cart Header -->\n          <div class=\"bg-slate-50 p-4 border-b border-slate-200\">\n            <div class=\"grid grid-cols-12 gap-4 text-sm font-semibold text-slate-700\">\n              <div class=\"col-span-6\">Товар</div>\n              <div class=\"col-span-2 text-center\">Цена</div>\n              <div class=\"col-span-2 text-center\">Количество</div>\n              <div class=\"col-span-2 text-center\">Итого</div>\n            </div>\n          </div>\n          \n          <!-- Cart Items -->\n          <div class=\"divide-y divide-slate-200\">\n            <div \n              v-for=\"item in cartItems\" \n              :key=\"item.productId\" \n              class=\"p-4\"\n            >\n              <div class=\"grid grid-cols-12 gap-4 items-center\">\n                <!-- Product Info -->\n                <div class=\"col-span-6 flex items-center\">\n                  <div class=\"w-16 h-16 rounded overflow-hidden flex-shrink-0 mr-4\">\n                    <img \n                      :src=\"item.image_url || 'https://via.placeholder.com/100x100?text=Нет+изображения'\" \n                      :alt=\"item.title\" \n                      class=\"w-full h-full object-cover\"\n                    >\n                  </div>\n                  <div>\n                    <h3 class=\"font-medium text-slate-800\">{{ item.title }}</h3>\n                    <button \n                      class=\"text-sm text-slate-500 hover:text-slate-700 mt-1\"\n                      @click=\"removeFromCart(item.productId)\"\n                    >\n                      Удалить\n                    </button>\n                  </div>\n                </div>\n                \n                <!-- Price -->\n                <div class=\"col-span-2 text-center\">\n                  <span class=\"font-medium\">{{ formatPrice(item.price) }} ₽</span>\n                </div>\n                \n                <!-- Quantity -->\n                <div class=\"col-span-2\">\n                  <div class=\"flex items-center justify-center\">\n                    <button \n                      class=\"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center\"\n                      @click=\"updateQuantity(item.productId, item.quantity - 1)\"\n                      :disabled=\"item.quantity <= 1\"\n                    >\n                      <span class=\"sr-only\">Уменьшить</span>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 12H4\" />\n                      </svg>\n                    </button>\n                    \n                    <span class=\"mx-3 w-8 text-center\">{{ item.quantity }}</span>\n                    \n                    <button \n                      class=\"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center\"\n                      @click=\"updateQuantity(item.productId, item.quantity + 1)\"\n                    >\n                      <span class=\"sr-only\">Увеличить</span>\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n                \n                <!-- Subtotal -->\n                <div class=\"col-span-2 text-center font-medium text-slate-800\">\n                  {{ formatPrice(item.price * item.quantity) }} ₽\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Continue Shopping -->\n        <div class=\"mt-6\">\n          <router-link to=\"/shop\" class=\"flex items-center text-slate-600 hover:text-slate-800\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n            </svg>\n            Продолжить покупки\n          </router-link>\n        </div>\n      </div>\n      \n      <!-- Order Summary -->\n      <div class=\"lg:col-span-1\">\n        <div class=\"bg-white rounded-lg shadow-md p-6 sticky top-4\">\n          <h2 class=\"text-xl font-semibold text-slate-800 mb-6\">Итого по заказу</h2>\n          \n          <div class=\"space-y-4 mb-6\">\n            <div class=\"flex justify-between\">\n              <span class=\"text-slate-600\">Сумма</span>\n              <span class=\"font-medium\">{{ formatPrice(cartTotal) }} ₽</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-slate-600\">Товаров</span>\n              <span class=\"font-medium\">{{ cartItemsCount }}</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-slate-600\">Доставка</span>\n              <span class=\"font-medium\">Бесплатно</span>\n            </div>\n            <div class=\"border-t border-slate-200 pt-4 flex justify-between\">\n              <span class=\"font-semibold\">Итого к оплате</span>\n              <span class=\"font-bold text-lg\">{{ formatPrice(cartTotal) }} ₽</span>\n            </div>\n          </div>\n          \n          <button \n            class=\"btn btn-primary w-full\"\n            @click=\"proceedToCheckout\"\n          >\n            Оформить заказ\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { useToast } from 'vue-toastification';\n\nexport default {\n  name: 'CartView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const toast = useToast();\n    \n    // Computed properties\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const cartItemsCount = computed(() => store.getters['cart/cartItemsCount']);\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated']);\n    const loading = computed(() => store.getters.isLoading);\n    \n    // Methods\n    const fetchCart = () => {\n      store.dispatch('cart/fetchCart');\n    };\n    \n    const updateQuantity = (productId, quantity) => {\n      if (quantity < 1) {\n        removeFromCart(productId);\n        return;\n      }\n      \n      store.dispatch('cart/updateCartItem', { productId, quantity });\n    };\n    \n    const removeFromCart = (productId) => {\n      store.dispatch('cart/removeFromCart', productId);\n    };\n    \n    const proceedToCheckout = () => {\n      if (!isAuthenticated.value) {\n        toast.info('Для оформления заказа необходимо войти в систему');\n        router.push('/login?redirect=/checkout');\n      } else {\n        router.push('/checkout');\n      }\n    };\n    \n    const formatPrice = (price) => {\n      return new Intl.NumberFormat('ru-RU').format(price);\n    };\n    \n    // Lifecycle hooks\n    onMounted(() => {\n      fetchCart();\n    });\n    \n    return {\n      cartItems,\n      cartTotal,\n      cartItemsCount,\n      loading,\n      updateQuantity,\n      removeFromCart,\n      proceedToCheckout,\n      formatPrice\n    };\n  }\n};\n</script>\n"],"mappings":"AAsJA,SAASA,QAAQ,EAAEC,SAAQ,QAAS,KAAK;AACzC,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,QAAO,QAAS,oBAAoB;AAE7C,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC,CAAC;IACxB,MAAMM,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,MAAMM,KAAI,GAAIL,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMM,SAAQ,GAAIV,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAMC,SAAQ,GAAIZ,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAME,cAAa,GAAIb,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,qBAAqB,CAAC,CAAC;IAC3E,MAAMG,eAAc,GAAId,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,sBAAsB,CAAC,CAAC;IAC7E,MAAMI,OAAM,GAAIf,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAACK,SAAS,CAAC;;IAEvD;IACA,MAAMC,SAAQ,GAAIA,CAAA,KAAM;MACtBV,KAAK,CAACW,QAAQ,CAAC,gBAAgB,CAAC;IAClC,CAAC;IAED,MAAMC,cAAa,GAAIA,CAACC,SAAS,EAAEC,QAAQ,KAAK;MAC9C,IAAIA,QAAO,GAAI,CAAC,EAAE;QAChBC,cAAc,CAACF,SAAS,CAAC;QACzB;MACF;MAEAb,KAAK,CAACW,QAAQ,CAAC,qBAAqB,EAAE;QAAEE,SAAS;QAAEC;MAAS,CAAC,CAAC;IAChE,CAAC;IAED,MAAMC,cAAa,GAAKF,SAAS,IAAK;MACpCb,KAAK,CAACW,QAAQ,CAAC,qBAAqB,EAAEE,SAAS,CAAC;IAClD,CAAC;IAED,MAAMG,iBAAgB,GAAIA,CAAA,KAAM;MAC9B,IAAI,CAACT,eAAe,CAACU,KAAK,EAAE;QAC1Bf,KAAK,CAACgB,IAAI,CAAC,kDAAkD,CAAC;QAC9DjB,MAAM,CAACkB,IAAI,CAAC,2BAA2B,CAAC;MAC1C,OAAO;QACLlB,MAAM,CAACkB,IAAI,CAAC,WAAW,CAAC;MAC1B;IACF,CAAC;IAED,MAAMC,WAAU,GAAKC,KAAK,IAAK;MAC7B,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;IACrD,CAAC;;IAED;IACA3B,SAAS,CAAC,MAAM;MACdgB,SAAS,CAAC,CAAC;IACb,CAAC,CAAC;IAEF,OAAO;MACLP,SAAS;MACTE,SAAS;MACTC,cAAc;MACdE,OAAO;MACPI,cAAc;MACdG,cAAc;MACdC,iBAAiB;MACjBI;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}