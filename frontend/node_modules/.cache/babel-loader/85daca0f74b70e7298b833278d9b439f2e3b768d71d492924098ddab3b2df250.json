{"ast":null,"code":"import { computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { useToast } from 'vue-toastification';\nexport default {\n  name: 'CartView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const toast = useToast();\n\n    // Computed properties\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const cartItemsCount = computed(() => store.getters['cart/cartItemsCount']);\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated']);\n    const loading = computed(() => store.getters.isLoading);\n\n    // Methods\n    const fetchCart = () => {\n      store.dispatch('cart/fetchCart');\n    };\n    const updateQuantity = (productId, quantity) => {\n      if (quantity < 1) {\n        removeFromCart(productId);\n        return;\n      }\n      store.dispatch('cart/updateCartItem', {\n        productId,\n        quantity\n      });\n    };\n    const removeFromCart = productId => {\n      store.dispatch('cart/removeFromCart', productId);\n    };\n    const proceedToCheckout = () => {\n      if (!isAuthenticated.value) {\n        toast.info('Для оформления заказа необходимо войти в систему');\n        router.push('/login?redirect=/checkout');\n      } else {\n        router.push('/checkout');\n      }\n    };\n    const formatPrice = price => {\n      return new Intl.NumberFormat('ru-RU').format(price);\n    };\n\n    // Lifecycle hooks\n    onMounted(() => {\n      fetchCart();\n    });\n    return {\n      cartItems,\n      cartTotal,\n      cartItemsCount,\n      loading,\n      updateQuantity,\n      removeFromCart,\n      proceedToCheckout,\n      formatPrice\n    };\n  }\n};","map":{"version":3,"names":["computed","onMounted","useStore","useRouter","useToast","name","setup","store","router","toast","cartItems","getters","cartTotal","cartItemsCount","isAuthenticated","loading","isLoading","fetchCart","dispatch","updateQuantity","productId","quantity","removeFromCart","proceedToCheckout","value","info","push","formatPrice","price","Intl","NumberFormat","format"],"sources":["/app/src/views/CartView.vue"],"sourcesContent":["<template>\n  <div class=\"velo-container py-12 md:py-16\">\n    <h1 class=\"mb-12\">Корзина</h1>\n    \n    <div v-if=\"loading\" class=\"flex justify-center py-20\">\n      <div class=\"animate-spin h-10 w-10 border-2 border-[color:var(--color-accent)] border-t-transparent rounded-full\"></div>\n    </div>\n    \n    <div v-else-if=\"cartItems.length === 0\" class=\"text-center py-20 border border-[color:var(--color-secondary)]\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-16 w-16 mx-auto text-[color:var(--color-accent)] mb-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n      </svg>\n      <h2 class=\"text-2xl font-light text-[color:var(--color-dark)] mb-4\">Ваша корзина пуста</h2>\n      <p class=\"text-[color:var(--color-light-text)] mb-10\">Добавьте товары в корзину, чтобы продолжить покупки</p>\n      <router-link to=\"/shop\" class=\"velo-btn velo-btn-primary\">\n        Перейти в каталог\n      </router-link>\n    </div>\n    \n    <div v-else class=\"grid grid-cols-1 lg:grid-cols-12 gap-10\">\n      <div class=\"lg:col-span-8\">\n        <!-- Cart Header -->\n        <div class=\"border-b border-[color:var(--color-secondary)] pb-4 mb-8 hidden md:block\">\n          <div class=\"grid grid-cols-12 gap-4 text-xs uppercase tracking-wider text-[color:var(--color-light-text)]\">\n            <div class=\"col-span-6\">Товар</div>\n            <div class=\"col-span-2 text-center\">Цена</div>\n            <div class=\"col-span-2 text-center\">Кол-во</div>\n            <div class=\"col-span-2 text-right\">Итого</div>\n          </div>\n        </div>\n        \n        <!-- Cart Items -->\n        <div class=\"space-y-8\">\n          <div \n            v-for=\"item in cartItems\" \n            :key=\"item.productId\" \n            class=\"border-b border-[color:var(--color-secondary)] pb-8\"\n          >\n            <div class=\"grid grid-cols-1 md:grid-cols-12 gap-4 items-center\">\n              <!-- Product Info -->\n              <div class=\"md:col-span-6 flex items-center\">\n                <div class=\"w-20 h-20 overflow-hidden mr-4\">\n                  <img \n                    :src=\"item.image_url || 'https://via.placeholder.com/100x100?text=Velo'\" \n                    :alt=\"item.title\" \n                    class=\"w-full h-full object-cover\"\n                  >\n                </div>\n                <div>\n                  <h3 class=\"font-light text-[color:var(--color-dark)] mb-1\">{{ item.title }}</h3>\n                  <button \n                    class=\"text-sm text-[color:var(--color-light-text)] hover:text-[color:var(--color-accent)]\"\n                    @click=\"removeFromCart(item.productId)\"\n                  >\n                    Удалить\n                  </button>\n                </div>\n              </div>\n              \n              <!-- Price -->\n              <div class=\"md:col-span-2 flex justify-between md:justify-center items-center\">\n                <span class=\"md:hidden text-xs text-[color:var(--color-light-text)]\">Цена:</span>\n                <span class=\"text-[color:var(--color-dark)]\">{{ formatPrice(item.price) }} ₽</span>\n              </div>\n              \n              <!-- Quantity -->\n              <div class=\"md:col-span-2 flex justify-between md:justify-center items-center\">\n                <span class=\"md:hidden text-xs text-[color:var(--color-light-text)]\">Количество:</span>\n                <div class=\"flex items-center border border-[color:var(--color-secondary)]\">\n                  <button \n                    class=\"px-3 py-1 text-[color:var(--color-dark)] hover:text-[color:var(--color-accent)]\"\n                    @click=\"updateQuantity(item.productId, item.quantity - 1)\"\n                    :disabled=\"item.quantity <= 1\"\n                  >\n                    &minus;\n                  </button>\n                  \n                  <span class=\"w-8 text-center text-[color:var(--color-dark)]\">{{ item.quantity }}</span>\n                  \n                  <button \n                    class=\"px-3 py-1 text-[color:var(--color-dark)] hover:text-[color:var(--color-accent)]\"\n                    @click=\"updateQuantity(item.productId, item.quantity + 1)\"\n                  >\n                    &#43;\n                  </button>\n                </div>\n              </div>\n              \n              <!-- Subtotal -->\n              <div class=\"md:col-span-2 flex justify-between md:justify-end items-center\">\n                <span class=\"md:hidden text-xs text-[color:var(--color-light-text)]\">Итого:</span>\n                <span class=\"text-[color:var(--color-accent)]\">{{ formatPrice(item.price * item.quantity) }} ₽</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Continue Shopping -->\n        <div class=\"mt-10\">\n          <router-link to=\"/shop\" class=\"flex items-center text-[color:var(--color-light-text)] hover:text-[color:var(--color-accent)]\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n            </svg>\n            Продолжить покупки\n          </router-link>\n        </div>\n      </div>\n      \n      <!-- Order Summary -->\n      <div class=\"lg:col-span-4\">\n        <div class=\"border border-[color:var(--color-secondary)] p-8 sticky top-28\">\n          <h2 class=\"text-2xl font-light text-[color:var(--color-dark)] mb-8\">Итого по заказу</h2>\n          \n          <div class=\"space-y-5 mb-8\">\n            <div class=\"flex justify-between\">\n              <span class=\"text-[color:var(--color-light-text)]\">Сумма</span>\n              <span>{{ formatPrice(cartTotal) }} ₽</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-[color:var(--color-light-text)]\">Товаров</span>\n              <span>{{ cartItemsCount }}</span>\n            </div>\n            <div class=\"flex justify-between\">\n              <span class=\"text-[color:var(--color-light-text)]\">Доставка</span>\n              <span>Бесплатно</span>\n            </div>\n            <div class=\"border-t border-[color:var(--color-secondary)] pt-5 flex justify-between\">\n              <span class=\"text-[color:var(--color-dark)]\">Итого к оплате</span>\n              <span class=\"text-[color:var(--color-accent)] text-xl\">{{ formatPrice(cartTotal) }} ₽</span>\n            </div>\n          </div>\n          \n          <button \n            class=\"velo-btn velo-btn-primary w-full\"\n            @click=\"proceedToCheckout\"\n          >\n            Оформить заказ\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { useToast } from 'vue-toastification';\n\nexport default {\n  name: 'CartView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const toast = useToast();\n    \n    // Computed properties\n    const cartItems = computed(() => store.getters['cart/cartItems']);\n    const cartTotal = computed(() => store.getters['cart/cartTotal']);\n    const cartItemsCount = computed(() => store.getters['cart/cartItemsCount']);\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated']);\n    const loading = computed(() => store.getters.isLoading);\n    \n    // Methods\n    const fetchCart = () => {\n      store.dispatch('cart/fetchCart');\n    };\n    \n    const updateQuantity = (productId, quantity) => {\n      if (quantity < 1) {\n        removeFromCart(productId);\n        return;\n      }\n      \n      store.dispatch('cart/updateCartItem', { productId, quantity });\n    };\n    \n    const removeFromCart = (productId) => {\n      store.dispatch('cart/removeFromCart', productId);\n    };\n    \n    const proceedToCheckout = () => {\n      if (!isAuthenticated.value) {\n        toast.info('Для оформления заказа необходимо войти в систему');\n        router.push('/login?redirect=/checkout');\n      } else {\n        router.push('/checkout');\n      }\n    };\n    \n    const formatPrice = (price) => {\n      return new Intl.NumberFormat('ru-RU').format(price);\n    };\n    \n    // Lifecycle hooks\n    onMounted(() => {\n      fetchCart();\n    });\n    \n    return {\n      cartItems,\n      cartTotal,\n      cartItemsCount,\n      loading,\n      updateQuantity,\n      removeFromCart,\n      proceedToCheckout,\n      formatPrice\n    };\n  }\n};\n</script>\n"],"mappings":"AAiJA,SAASA,QAAQ,EAAEC,SAAQ,QAAS,KAAK;AACzC,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AACtC,SAASC,QAAO,QAAS,oBAAoB;AAE7C,eAAe;EACbC,IAAI,EAAE,UAAU;EAChBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,QAAQ,CAAC,CAAC;IACxB,MAAMM,MAAK,GAAIL,SAAS,CAAC,CAAC;IAC1B,MAAMM,KAAI,GAAIL,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMM,SAAQ,GAAIV,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAMC,SAAQ,GAAIZ,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,MAAME,cAAa,GAAIb,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,qBAAqB,CAAC,CAAC;IAC3E,MAAMG,eAAc,GAAId,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAAC,sBAAsB,CAAC,CAAC;IAC7E,MAAMI,OAAM,GAAIf,QAAQ,CAAC,MAAMO,KAAK,CAACI,OAAO,CAACK,SAAS,CAAC;;IAEvD;IACA,MAAMC,SAAQ,GAAIA,CAAA,KAAM;MACtBV,KAAK,CAACW,QAAQ,CAAC,gBAAgB,CAAC;IAClC,CAAC;IAED,MAAMC,cAAa,GAAIA,CAACC,SAAS,EAAEC,QAAQ,KAAK;MAC9C,IAAIA,QAAO,GAAI,CAAC,EAAE;QAChBC,cAAc,CAACF,SAAS,CAAC;QACzB;MACF;MAEAb,KAAK,CAACW,QAAQ,CAAC,qBAAqB,EAAE;QAAEE,SAAS;QAAEC;MAAS,CAAC,CAAC;IAChE,CAAC;IAED,MAAMC,cAAa,GAAKF,SAAS,IAAK;MACpCb,KAAK,CAACW,QAAQ,CAAC,qBAAqB,EAAEE,SAAS,CAAC;IAClD,CAAC;IAED,MAAMG,iBAAgB,GAAIA,CAAA,KAAM;MAC9B,IAAI,CAACT,eAAe,CAACU,KAAK,EAAE;QAC1Bf,KAAK,CAACgB,IAAI,CAAC,kDAAkD,CAAC;QAC9DjB,MAAM,CAACkB,IAAI,CAAC,2BAA2B,CAAC;MAC1C,OAAO;QACLlB,MAAM,CAACkB,IAAI,CAAC,WAAW,CAAC;MAC1B;IACF,CAAC;IAED,MAAMC,WAAU,GAAKC,KAAK,IAAK;MAC7B,OAAO,IAAIC,IAAI,CAACC,YAAY,CAAC,OAAO,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;IACrD,CAAC;;IAED;IACA3B,SAAS,CAAC,MAAM;MACdgB,SAAS,CAAC,CAAC;IACb,CAAC,CAAC;IAEF,OAAO;MACLP,SAAS;MACTE,SAAS;MACTC,cAAc;MACdE,OAAO;MACPI,cAAc;MACdG,cAAc;MACdC,iBAAiB;MACjBI;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}