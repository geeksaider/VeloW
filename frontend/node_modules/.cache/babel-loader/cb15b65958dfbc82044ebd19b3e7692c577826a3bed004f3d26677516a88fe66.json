{"ast":null,"code":"import { ref, computed, watch, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'RegisterView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    // State\n    const email = ref('');\n    const password = ref('');\n    const passwordConfirm = ref('');\n    const passwordError = ref('');\n\n    // Computed\n    const loading = computed(() => store.getters.isLoading);\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated']);\n    const isFormValid = computed(() => {\n      return email.value.trim() !== '' && password.value.trim() !== '' && password.value === passwordConfirm.value && password.value.length >= 6;\n    });\n\n    // Watch for password confirmation\n    watch([password, passwordConfirm], ([newPassword, newPasswordConfirm]) => {\n      if (newPasswordConfirm && newPassword !== newPasswordConfirm) {\n        passwordError.value = 'Пароли не совпадают';\n      } else {\n        passwordError.value = '';\n      }\n    });\n\n    // Methods\n    const register = async () => {\n      if (!isFormValid.value) return;\n      try {\n        // Показываем индикатор загрузки вручную, если в будущем будут проблемы с диспетчером\n        store.commit('SET_LOADING', true, {\n          root: true\n        });\n        const userData = {\n          email: email.value,\n          password: password.value\n        };\n        console.log('Отправка данных для регистрации:', userData.email);\n        const result = await store.dispatch('auth/register', userData);\n        if (result.success) {\n          // Успешно зарегистрировались\n          console.log('Регистрация успешна!');\n          router.push('/');\n        } else {\n          console.error('Ошибка при регистрации:', result.message);\n          // Дополнительная обработка ошибок в компоненте, если нужно\n        }\n      } catch (error) {\n        console.error('Непредвиденная ошибка при регистрации:', error);\n        // Если vuex вызвал исключение, обрабатываем его здесь\n        alert('Произошла ошибка при регистрации. Пожалуйста, попробуйте позже.');\n      } finally {\n        // Убираем индикатор загрузки вручную\n        store.commit('SET_LOADING', false, {\n          root: true\n        });\n      }\n    };\n\n    // Lifecycle hooks\n    onMounted(() => {\n      // If already logged in, redirect to home\n      if (isAuthenticated.value) {\n        router.push('/');\n      }\n    });\n    return {\n      email,\n      password,\n      passwordConfirm,\n      passwordError,\n      loading,\n      isFormValid,\n      register\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","watch","onMounted","useStore","useRouter","name","setup","store","router","email","password","passwordConfirm","passwordError","loading","getters","isLoading","isAuthenticated","isFormValid","value","trim","length","newPassword","newPasswordConfirm","register","commit","root","userData","console","log","result","dispatch","success","push","error","message","alert"],"sources":["C:\\Users\\geeksaider\\VeloW\\frontend\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"velo-container py-16 md:py-20\">\n    <div class=\"max-w-md mx-auto border border-[color:var(--color-secondary)]\">\n      <div class=\"p-8 md:p-12\">\n        <h1 class=\"text-2xl font-light text-[color:var(--color-dark)] mb-10 text-center\">Регистрация</h1>\n        \n        <form @submit.prevent=\"register\" class=\"space-y-6\">\n          <div>\n            <label for=\"email\" class=\"velo-label\">Email</label>\n            <input \n              id=\"email\" \n              type=\"email\" \n              v-model=\"email\" \n              class=\"velo-input w-full\" \n              required\n              placeholder=\"Введите ваш email\"\n            >\n          </div>\n          \n          <div>\n            <label for=\"password\" class=\"velo-label\">Пароль</label>\n            <input \n              id=\"password\" \n              type=\"password\" \n              v-model=\"password\" \n              class=\"velo-input w-full\" \n              required\n              placeholder=\"Введите пароль\"\n              minlength=\"6\"\n            >\n            <p class=\"text-xs text-[color:var(--color-light-text)] mt-2\">Минимум 6 символов</p>\n          </div>\n          \n          <div>\n            <label for=\"passwordConfirm\" class=\"velo-label\">Подтверждение пароля</label>\n            <input \n              id=\"passwordConfirm\" \n              type=\"password\" \n              v-model=\"passwordConfirm\" \n              class=\"velo-input w-full\" \n              required\n              placeholder=\"Повторите пароль\"\n              minlength=\"6\"\n            >\n            <p v-if=\"passwordError\" class=\"text-xs text-red-500 mt-2\">\n              {{ passwordError }}\n            </p>\n          </div>\n          \n          <div class=\"pt-4\">\n            <button \n              type=\"submit\" \n              class=\"velo-btn velo-btn-primary w-full\"\n              :disabled=\"loading || !isFormValid\"\n            >\n              <span v-if=\"loading\" class=\"flex items-center justify-center\">\n                <svg class=\"animate-spin mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                  <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"2\"></circle>\n                  <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                </svg>\n                Регистрация...\n              </span>\n              <span v-else>Зарегистрироваться</span>\n            </button>\n            \n            <div class=\"text-center text-[color:var(--color-light-text)] mt-8\">\n              Уже есть аккаунт? \n              <router-link to=\"/login\" class=\"text-[color:var(--color-accent)] hover:border-b border-[color:var(--color-accent)]\">\n                Войти\n              </router-link>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, watch, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  name: 'RegisterView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    \n    // State\n    const email = ref('');\n    const password = ref('');\n    const passwordConfirm = ref('');\n    const passwordError = ref('');\n    \n    // Computed\n    const loading = computed(() => store.getters.isLoading);\n    const isAuthenticated = computed(() => store.getters['auth/isAuthenticated']);\n    \n    const isFormValid = computed(() => {\n      return (\n        email.value.trim() !== '' &&\n        password.value.trim() !== '' &&\n        password.value === passwordConfirm.value &&\n        password.value.length >= 6\n      );\n    });\n    \n    // Watch for password confirmation\n    watch([password, passwordConfirm], ([newPassword, newPasswordConfirm]) => {\n      if (newPasswordConfirm && newPassword !== newPasswordConfirm) {\n        passwordError.value = 'Пароли не совпадают';\n      } else {\n        passwordError.value = '';\n      }\n    });\n    \n    // Methods\n    const register = async () => {\n      if (!isFormValid.value) return;\n      \n      try {\n        // Показываем индикатор загрузки вручную, если в будущем будут проблемы с диспетчером\n        store.commit('SET_LOADING', true, { root: true });\n        \n        const userData = {\n          email: email.value,\n          password: password.value\n        };\n        \n        console.log('Отправка данных для регистрации:', userData.email);\n        \n        const result = await store.dispatch('auth/register', userData);\n        \n        if (result.success) {\n          // Успешно зарегистрировались\n          console.log('Регистрация успешна!');\n          router.push('/');\n        } else {\n          console.error('Ошибка при регистрации:', result.message);\n          // Дополнительная обработка ошибок в компоненте, если нужно\n        }\n      } catch (error) {\n        console.error('Непредвиденная ошибка при регистрации:', error);\n        // Если vuex вызвал исключение, обрабатываем его здесь\n        alert('Произошла ошибка при регистрации. Пожалуйста, попробуйте позже.');\n      } finally {\n        // Убираем индикатор загрузки вручную\n        store.commit('SET_LOADING', false, { root: true });\n      }\n    };\n    \n    // Lifecycle hooks\n    onMounted(() => {\n      // If already logged in, redirect to home\n      if (isAuthenticated.value) {\n        router.push('/');\n      }\n    });\n    \n    return {\n      email,\n      password,\n      passwordConfirm,\n      passwordError,\n      loading,\n      isFormValid,\n      register\n    };\n  }\n};\n</script>\n"],"mappings":"AA+EA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,SAAQ,QAAS,KAAK;AACrD,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,MAAK,GAAIJ,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMK,KAAI,GAAIV,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMW,QAAO,GAAIX,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMY,eAAc,GAAIZ,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAMa,aAAY,GAAIb,GAAG,CAAC,EAAE,CAAC;;IAE7B;IACA,MAAMc,OAAM,GAAIb,QAAQ,CAAC,MAAMO,KAAK,CAACO,OAAO,CAACC,SAAS,CAAC;IACvD,MAAMC,eAAc,GAAIhB,QAAQ,CAAC,MAAMO,KAAK,CAACO,OAAO,CAAC,sBAAsB,CAAC,CAAC;IAE7E,MAAMG,WAAU,GAAIjB,QAAQ,CAAC,MAAM;MACjC,OACES,KAAK,CAACS,KAAK,CAACC,IAAI,CAAC,MAAM,EAAC,IACxBT,QAAQ,CAACQ,KAAK,CAACC,IAAI,CAAC,MAAM,EAAC,IAC3BT,QAAQ,CAACQ,KAAI,KAAMP,eAAe,CAACO,KAAI,IACvCR,QAAQ,CAACQ,KAAK,CAACE,MAAK,IAAK;IAE7B,CAAC,CAAC;;IAEF;IACAnB,KAAK,CAAC,CAACS,QAAQ,EAAEC,eAAe,CAAC,EAAE,CAAC,CAACU,WAAW,EAAEC,kBAAkB,CAAC,KAAK;MACxE,IAAIA,kBAAiB,IAAKD,WAAU,KAAMC,kBAAkB,EAAE;QAC5DV,aAAa,CAACM,KAAI,GAAI,qBAAqB;MAC7C,OAAO;QACLN,aAAa,CAACM,KAAI,GAAI,EAAE;MAC1B;IACF,CAAC,CAAC;;IAEF;IACA,MAAMK,QAAO,GAAI,MAAAA,CAAA,KAAY;MAC3B,IAAI,CAACN,WAAW,CAACC,KAAK,EAAE;MAExB,IAAI;QACF;QACAX,KAAK,CAACiB,MAAM,CAAC,aAAa,EAAE,IAAI,EAAE;UAAEC,IAAI,EAAE;QAAK,CAAC,CAAC;QAEjD,MAAMC,QAAO,GAAI;UACfjB,KAAK,EAAEA,KAAK,CAACS,KAAK;UAClBR,QAAQ,EAAEA,QAAQ,CAACQ;QACrB,CAAC;QAEDS,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEF,QAAQ,CAACjB,KAAK,CAAC;QAE/D,MAAMoB,MAAK,GAAI,MAAMtB,KAAK,CAACuB,QAAQ,CAAC,eAAe,EAAEJ,QAAQ,CAAC;QAE9D,IAAIG,MAAM,CAACE,OAAO,EAAE;UAClB;UACAJ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;UACnCpB,MAAM,CAACwB,IAAI,CAAC,GAAG,CAAC;QAClB,OAAO;UACLL,OAAO,CAACM,KAAK,CAAC,yBAAyB,EAAEJ,MAAM,CAACK,OAAO,CAAC;UACxD;QACF;MACF,EAAE,OAAOD,KAAK,EAAE;QACdN,OAAO,CAACM,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAAC;QAC9D;QACAE,KAAK,CAAC,iEAAiE,CAAC;MAC1E,UAAU;QACR;QACA5B,KAAK,CAACiB,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE;UAAEC,IAAI,EAAE;QAAK,CAAC,CAAC;MACpD;IACF,CAAC;;IAED;IACAvB,SAAS,CAAC,MAAM;MACd;MACA,IAAIc,eAAe,CAACE,KAAK,EAAE;QACzBV,MAAM,CAACwB,IAAI,CAAC,GAAG,CAAC;MAClB;IACF,CAAC,CAAC;IAEF,OAAO;MACLvB,KAAK;MACLC,QAAQ;MACRC,eAAe;MACfC,aAAa;MACbC,OAAO;MACPI,WAAW;MACXM;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}